{"version":3,"file":"view.js","mappings":"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","sources":["webpack://vml-fixtures/./src/view.js"],"sourcesContent":["\"use strict\";\n\njQuery(function ($) {\n\tconst ajax_url = $(\"div#topdf\").data(\"ajax-url\");\n\n\tfunction setButtonLoadingState($button, isLoading) {\n\t\tif (isLoading) {\n\t\t\t$button.attr(\"disabled\", \"disabled\").attr(\"data-loading\", \"true\");\n\t\t} else {\n\t\t\t$button.removeAttr(\"disabled\").removeAttr(\"data-loading\");\n\t\t}\n\t}\n\n\tfunction displayError(errorMessage, $errorDialog) {\n\t\tconsole.error(\"Error:\", errorMessage); // log the error message\n\t\t$errorDialog.text(errorMessage).show();\n\t}\n\n\tfunction sendAddToCartRequest(products, button) {\n\t\tconsole.log(\"Sending request with products:\", products); // log the products data\n\n\t\tconst $button = $(button);\n\t\tconst $commonAncestor = $button.closest(\".common-container\");\n\t\tconst $loadingMessageElement = $button.find(\".js-loadingMsg\");\n\t\tconst $successDialog = $commonAncestor.find(\".addToCart-success\");\n\t\tconst $errorDialog = $commonAncestor.find(\".addToCart-fail\");\n\n\t\tsetButtonLoadingState($button, true);\n\t\t$loadingMessageElement.text($loadingMessageElement.data(\"loading-msg\"));\n\t\t$successDialog.hide();\n\t\t$errorDialog.hide();\n\n\t\tif (!products || products.length === 0) {\n\t\t\tdisplayError(\n\t\t\t\t\"Product information is missing. Please try again.\",\n\t\t\t\t$errorDialog,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = {\n\t\t\taction: \"vizmerch_add_to_cart\",\n\t\t\tproducts: products,\n\t\t};\n\n\t\tconsole.log(\"Sending request with data:\", data); // log the products data\n\n\t\t$.ajax({\n\t\t\turl: ajax_url,\n\t\t\ttype: \"POST\",\n\t\t\tcontentType: \"application/json\",\n\t\t\tdataType: \"json\",\n\t\t\tdata: JSON.stringify(data),\n\t\t})\n\t\t\t.done(function (data) {\n\t\t\t\tconsole.log(\"Request successful, received data:\", data); // log the success data\n\t\t\t\tif (data.error) {\n\t\t\t\t\tdisplayError(data.error, $errorDialog);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$successDialog.show();\n\t\t\t\tcart_info.count += products.length;\n\t\t\t\tupdateCartCount();\n\t\t\t})\n\t\t\t.fail(function (jqXHR) {\n\t\t\t\tconsole.error(\"Request failed:\", jqXHR); // log the failure object\n\t\t\t\tlet errorMessage =\n\t\t\t\t\t\"There has been a problem adding the items to the cart. Please try again later.\";\n\t\t\t\tif (jqXHR.responseJSON && jqXHR.responseJSON.error) {\n\t\t\t\t\terrorMessage = jqXHR.responseJSON.error;\n\t\t\t\t}\n\t\t\t\tdisplayError(errorMessage, $errorDialog);\n\t\t\t})\n\t\t\t.always(function () {\n\t\t\t\tsetButtonLoadingState($button, false);\n\t\t\t\t$loadingMessageElement.text(\"\");\n\t\t\t});\n\t}\n\n\t$(document).on(\"click\", \"button.add-cart\", function (event) {\n\t\tconst $button = $(event.target).closest(\"button\");\n\t\tconst product_id = $button.data(\"product-id\");\n\t\tconst product_code = $button.data(\"product-code\");\n\t\tsendAddToCartRequest(\n\t\t\t[{ product_id: product_id, product_code: product_code, qty: 1 }],\n\t\t\t$button[0],\n\t\t);\n\t});\n\n\twindow.handleAddShelfToCart = function (products) {\n\t\tconst $button = $(event.target).closest(\"button\");\n\t\tsendAddToCartRequest(products, $button[0]);\n\t};\n\n\twindow.openDialog = function (id) {\n\t\tdocument.getElementById(id).showModal();\n\t};\n\n\twindow.closeDialog = function (id) {\n\t\tdocument.getElementById(id).close();\n\t};\n\n\t/* Handle clicks on the backdrop */\n\tdocument.addEventListener(\n\t\t\"click\",\n\t\tfunction (e) {\n\t\t\tif (e.target instanceof HTMLDialogElement && e.target.open) {\n\t\t\t\twindow.closeDialog(e.target.id);\n\t\t\t}\n\t\t},\n\t\tfalse,\n\t);\n});\n"],"names":["jQuery","$","ajax_url","data","setButtonLoadingState","$button","isLoading","attr","removeAttr","displayError","errorMessage","$errorDialog","console","error","text","show","sendAddToCartRequest","products","button","log","$commonAncestor","closest","$loadingMessageElement","find","$successDialog","hide","length","action","ajax","url","type","contentType","dataType","JSON","stringify","done","cart_info","count","updateCartCount","fail","jqXHR","responseJSON","always","document","on","event","target","product_id","product_code","qty","window","handleAddShelfToCart","openDialog","id","getElementById","showModal","closeDialog","close","addEventListener","e","HTMLDialogElement","open"],"sourceRoot":""}