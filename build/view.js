!function(){"use strict";jQuery((function(t){const e=t("div#topdf").data("ajax-url");function o(t,e){e?t.attr("disabled","disabled").attr("data-loading","true"):t.removeAttr("disabled").removeAttr("data-loading")}function n(t,e){console.error("Error:",t),e.text(t).show()}function a(a,d){console.log("Sending request with products:",a);const r=t(d),i=r.closest(".common-container"),c=r.find(".js-loadingMsg"),s=i.find(".addToCart-success"),l=i.find(".addToCart-fail");if(o(r,!0),c.text(c.data("loading-msg")),s.hide(),l.hide(),!a||0===a.length)return void n("Product information is missing. Please try again.",l);const u={action:"vizmerch_add_to_cart",products:a};console.log("Sending request with data:",u),t.ajax({url:e,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(u)}).done((function(t){console.log("Request successful, received data:",t),t.error?n(t.error,l):(s.show(),cart_info.count+=a.length,updateCartCount())})).fail((function(t){console.error("Request failed:",t);let e="There has been a problem adding the items to the cart. Please try again later.";t.responseJSON&&t.responseJSON.error&&(e=t.responseJSON.error),n(e,l)})).always((function(){o(r,!1),c.text("")}))}t(document).on("click","button.add-cart",(function(e){const o=t(e.target).closest("button");a([{product_id:o.data("product-id"),product_code:o.data("product-code"),qty:1}],o[0])})),window.handleAddShelfToCart=function(e){a(e,t(event.target).closest("button")[0])},window.openDialog=function(t){document.getElementById(t).showModal()},window.closeDialog=function(t){document.getElementById(t).close()},document.addEventListener("click",(function(t){t.target instanceof HTMLDialogElement&&t.target.open&&window.closeDialog(t.target.id)}),!1)}))}();