jQuery((function(t){const o=t("div#topdf").data("ajax-url");function e(e,n){const r=t(n),d=r.closest(".dialog, .shelf-title, .footer-tocart"),i=r.find(".js-loadingMsg");if(r.attr("disabled","disabled").attr("data-loading","true"),i.text(i.data("loading-msg")),d.find(".addToCart-success, .addToCart-fail").hide(),!e||0===e.length)return void a("Product information is missing. Please try again.",d);const s={action:"vizmerch_add_to_cart",products:e};console.log(s),t.ajax({url:o,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(s)}).done((function(t){console.log(t),t.error?a(t.error,d):(d.find(".addToCart-success").show(),cart_info.count+=e.length,updateCartCount())})).fail((function(t,o,e){console.error("There has been a problem with your fetch operation:",e);let n="There has been a problem adding the items to the cart. Please try again later.";t.responseJSON&&t.responseJSON.error&&(n=t.responseJSON.error),a(n,d)})).always((function(){r.removeAttr("disabled").removeAttr("data-loading"),i.text("")}))}function a(t,o){o.find(".addToCart-fail").text(t).show()}window.handleAddToCart=function(o){const a=t(o.target).closest("button");e([{product_id:a.data("product-id"),product_code:a.data("product-code"),qty:1}],a[0])},window.handleAddShelfToCart=function(o){e(o,t(event.target).closest("button")[0])}}));